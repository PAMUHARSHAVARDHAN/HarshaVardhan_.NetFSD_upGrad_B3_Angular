<!DOCTYPE html>
<html>
<head>
    <title>Weather Data Fetcher</title>
</head>
<body>

<h2>Weather Data Fetcher</h2>

<button onclick="promiseWeather()">Get Weather (Promise)</button>
<button onclick="asyncWeather()">Get Weather (Async/Await)</button>

<hr>

<div id="weather1"></div>

<script>

var weatherEl = document.getElementById("weather1");

var url = "https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current_weather=true";



// Promise


const promiseWeather = () => {

    weatherEl.innerHTML = "Loading...";

    fetch(url)
    .then((response) => {

        if (!response.ok) {
            throw new Error("API Request Failed");
        }

        return response.json();
    })
    .then((jsonData) => {

        var weatherData = jsonData.current_weather;

        weatherEl.innerHTML =
            "Temperature: " + weatherData.temperature + " °C <br/>" +
            "Wind Speed: " + weatherData.windspeed + " km/h <br/>" +
            "Wind Direction: " + weatherData.winddirection;
    })
    .catch((error) => {
        weatherEl.innerHTML = "Error: " + error.message;
    });
};

// Async/Await 

const asyncWeather = async () => {

    weatherEl.innerHTML = "Loading...";

    try {

        var response = await fetch(url);

        if (!response.ok) {
            throw new Error("API Request Failed");
        }

        var jsonData = await response.json();
        var weatherData = jsonData.current_weather;

        weatherEl.innerHTML =
            "Temperature: " + weatherData.temperature + " °C <br/>" +
            "Wind Speed: " + weatherData.windspeed + " km/h <br/>" +
            "Wind Direction: " + weatherData.winddirection;

    } catch (error) {
        weatherEl.innerHTML = "Error: " + error.message;
    }
};

</script>

</body>
</html>